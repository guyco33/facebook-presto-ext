import com.facebook.presto.ext.functions.*;

public class test1 {

    public static void main(String[] args) {
        System.out.println(ExtJsonFunctions.getJsonKeys("{\"a\": { \"b\": {} } }",true));
        //System.exit(1);

        String str3 = "{\"context\":{\"hex_code\":54081542,\"latest_ts\":1538814319},\"created_at\":1538814658252,\"env\":\"RU\",\"event_name\":\"algo_surge_service|order_surge_estimation\",\"request\":{\"class_ids\":[\"96\",\"74\"],\"destination\":{\"lat\":0,\"lng\":0},\"max_surge\":2.3,\"order_datetime\":\"2018-10-06T08:30:58Z\",\"order_id\":\"0\",\"order_origin\":{\"lat\":55.6721698,\"lng\":37.5415973},\"session_id\":\"268d5dfb861ac4307dc7133fc67b4fb3\",\"surge_group_ids\":[1],\"user_id\":\"440488\"},\"response\":{\"surge_multipliers\":[{\"model_version\":\"1.x\",\"surge_group_id\":1,\"surge_multiplier\":\"1.0\"}]}}";
        System.out.println(ExtJsonFunctions.getJsonKeys(str3,true));
        String str = " {\n" +
                "   \"firstName\": \"John\", \"lastName\": \"Smith\", \"age\": 25,\n" +
                "   \"phoneNumber\": [\n" +
                "       { \"type\": \"home\", \"number\": \"212 555-1234\" },\n" +
                "       { \"type\": \"fax\", \"number\": \"646 555-4567\" }\n" +
                "    ]\n" +
                " }";

        System.out.println(ExtJsonFunctions.getJsonKeys(str,true));
        System.out.println(ExtJsonFunctions.getJsonKeys("[{\"asd\":6},{\"asd\":556}]", true));

        String str2 = "{\"created_at\":\"2018-10-04T15:49:31.211+00:00\",\"env\":\"UK\",\"event_name\":\"charging|calculation\",\"id\":1757806314,\"odr\":{\"actual_stop_points\":null,\"actual_stop_points_from_dbx_enabled\":false,\"actual_stop_points_reference_adjustment_radius\":300,\"arrived_at\":\"2018-10-04T15:41:44Z\",\"breaks_duration_seconds\":0,\"cancellation_state\":null,\"cancelled_at\":null,\"commitment\":null,\"company\":null,\"created_at\":\"2018-10-04T15:34:15Z\",\"customer\":{\"id\":3027848,\"name\":\"Lorna Wells\",\"properties\":{},\"user\":{\"id\":3038860,\"uuid\":\"e39d528078f6013541db0658222f008a\"}},\"customer_surge\":{},\"destination\":null,\"division_canonical_id\":\"112\",\"driver_id\":5436,\"driving_distance_meters\":1654.6415,\"drop_off\":{\"full_address\":\"114 Victoria Rise, SW4 0NW\",\"latitude\":51.464238,\"longitude\":-0.147982},\"ended_at\":\"2018-10-04T15:49:23Z\",\"env\":\"UK\",\"estimation\":null,\"experiment\":null,\"extras\":null,\"features\":{\"tolls\":true},\"fixed_charge_disabled\":false,\"no_show\":false,\"order_id\":299326033,\"order_status\":\"driving\",\"order_type\":\"private\",\"order_uuid\":\"df3f0580aa18013628af6a7d8d73e45a\",\"origin\":{\"full_address\":\"The Bread \\u0026 Roses, London, SW4 6DZ\",\"latitude\":51.465905,\"longitude\":-0.136443},\"overrides\":null,\"payment_type\":\"credit_card\",\"polyline\":\"}|byHjrYFC^U^SROXQ^QTKf@[^Sp@Yf@c@PIDEJGb@a@dAe@~@m@TW@ARXd@jBZbBPz@@FVhA^dBRfA@J?DLp@h@`Ar@nAv@pABBDDb@l@NfBGzBGhACh@AVA`@IhBCfDCrDAnDExCC~CCnBCtCMpAu@Z{Aj@wAf@uA^gATy@FYD_@Fe@FSDC?\",\"reference_stop_points\":null,\"scheduled_at\":\"2018-10-04T15:34:15Z\",\"settings\":{\"use_snapshots\":null},\"started_at\":\"2018-10-04T15:42:45Z\",\"street_hail\":false,\"supplier\":{\"fleet\":{\"conditional_tax\":true,\"sales_tax\":true},\"id\":5436,\"properties\":{\"car_type\":\"custom1\"}},\"supplier_surge\":{},\"taxi_meter\":\"6.4\",\"tips\":0,\"will_arrive_at\":\"2018-10-04T16:41:44+01:00\"},\"order_id\":299326033,\"pricing\":{\"customer\":{\"concept_name\":\"Fixed Price, failing over to External Meter\",\"contract\":{\"id\":31692,\"name\":\"Default\"},\"flow\":\"main\",\"mode\":{\"id\":288116,\"name\":\"T1_offpeak_a\",\"price_type\":\"none\"},\"price_models\":[{\"components\":[{\"apply_surge\":true,\"markups\":null,\"name\":\"driving\",\"sub_component\":{\"allow_cap_on_base_fare\":null,\"apply_surge\":true,\"commitment_required\":true,\"commitment_respected\":true,\"drop_off_ignored\":true,\"estimate_minimum_distance\":0,\"estimate_with_traffic\":false,\"fixed_price_by_estimate\":false,\"fixed_price_list_id\":257355,\"main_base_fare_area\":null,\"markups\":null,\"minimum_amount\":0,\"name\":\"fixed_price\",\"not_available_for_payment_types\":[\"cash\"],\"surge_cap_amount\":10}},{\"apply_surge\":false,\"free_waiting_time_per_stop\":\"0.0\",\"from_airport_tiered_pricing\":{\"apply_surge\":false,\"data\":{\"grace_value\":\"0.0\",\"segments\":[{\"max\":15,\"price_per_unit\":\"0.0\"},{\"max\":-1,\"price_per_unit\":\"0.5\"}]},\"markups\":null,\"name\":\"tiered_pricing\"},\"main_tiered_pricing\":{\"apply_surge\":false,\"data\":{\"grace_value\":\"0.0\",\"segments\":[{\"max\":2,\"price_per_unit\":\"0.0\"},{\"max\":-1,\"price_per_unit\":\"0.5\"}]},\"markups\":null,\"name\":\"tiered_pricing\"},\"markups\":null,\"name\":\"waiting\"},{\"apply_surge\":false,\"markups\":null,\"name\":\"tolls\",\"timeslots\":null,\"use_destination_for_fixed_price\":true},{\"applies_to\":[\"driving\"],\"apply_surge\":false,\"markups\":null,\"name\":\"surge\"},{\"applies_to\":[\"driving\"],\"applies_to_extras\":null,\"apply_surge\":false,\"customer_tip\":null,\"enabled\":true,\"markups\":null,\"name\":\"tips\",\"supplier_share\":null}],\"name\":\"price_model\"},{\"components\":[{\"apply_surge\":false,\"markups\":null,\"name\":\"driving\",\"sub_component\":{\"apply_surge\":false,\"markups\":null,\"name\":\"external_meter\"}},{\"applies_to\":[\"driving\"],\"applies_to_extras\":null,\"apply_surge\":false,\"customer_tip\":null,\"enabled\":true,\"markups\":null,\"name\":\"tips\",\"supplier_share\":null},{\"apply_surge\":false,\"correction\":0,\"markups\":null,\"name\":\"external_meter_surge\"},{\"applies_to\":[\"driving\"],\"apply_surge\":false,\"markups\":null,\"name\":\"surge\"}],\"name\":\"price_model\"}],\"service_class\":{\"id\":112,\"name\":\"yellow badge black taxi london\"},\"settings\":{\"distance_units\":\"kilometer\",\"granularity_precision\":1,\"unit_granularity\":\"no_rounding\"},\"taxes\":{\"conditional_tax\":null,\"managed_with_tax\":false,\"sales_tax\":null,\"taxable_extras\":null}},\"supplier\":{\"concept_name\":\"Fixed Price, failing over to External Meter\",\"contract\":{\"id\":31691,\"name\":\"Default\"},\"flow\":\"main\",\"mode\":{\"id\":288119,\"name\":\"T1_offpeak_a\",\"price_type\":\"none\"},\"price_models\":[{\"components\":[{\"apply_surge\":false,\"markups\":null,\"name\":\"driving\",\"sub_component\":{\"allow_cap_on_base_fare\":null,\"apply_surge\":false,\"commitment_required\":true,\"commitment_respected\":true,\"drop_off_ignored\":true,\"estimate_minimum_distance\":0,\"estimate_with_traffic\":false,\"fixed_price_by_estimate\":false,\"fixed_price_list_id\":257376,\"main_base_fare_area\":null,\"markups\":null,\"minimum_amount\":0,\"name\":\"fixed_price\",\"not_available_for_payment_types\":null,\"surge_cap_amount\":null}},{\"apply_surge\":false,\"free_waiting_time_per_stop\":\"0.0\",\"from_airport_tiered_pricing\":{\"apply_surge\":false,\"data\":{\"grace_value\":\"0.0\",\"segments\":[{\"max\":15,\"price_per_unit\":\"0.0\"},{\"max\":-1,\"price_per_unit\":\"0.5\"}]},\"markups\":null,\"name\":\"tiered_pricing\"},\"main_tiered_pricing\":{\"apply_surge\":false,\"data\":{\"grace_value\":\"0.0\",\"segments\":[{\"max\":2,\"price_per_unit\":\"0.0\"},{\"max\":-1,\"price_per_unit\":\"0.5\"}]},\"markups\":null,\"name\":\"tiered_pricing\"},\"markups\":null,\"name\":\"waiting\"},{\"apply_surge\":false,\"markups\":null,\"name\":\"tolls\",\"timeslots\":[{\"cost_change_value\":0,\"price_list_id\":683,\"time_slot_kind\":\"fixed_price\",\"time_slot_name\":\"Heathrow Parking Charge\"}],\"use_destination_for_fixed_price\":true},{\"applies_to\":null,\"apply_surge\":false,\"markups\":null,\"name\":\"surge\"},{\"applies_to\":null,\"applies_to_extras\":null,\"apply_surge\":false,\"customer_tip\":\"excluding_tax\",\"enabled\":false,\"markups\":null,\"name\":\"tips\",\"supplier_share\":100}],\"name\":\"price_model\"},{\"components\":[{\"apply_surge\":false,\"markups\":null,\"name\":\"driving\",\"sub_component\":{\"apply_surge\":false,\"markups\":null,\"name\":\"external_meter\"}},{\"apply_surge\":false,\"markups\":null,\"name\":\"tolls\",\"timeslots\":[{\"cost_change_value\":0,\"price_list_id\":683,\"time_slot_kind\":\"fixed_price\",\"time_slot_name\":\"Heathrow Parking Charge\"}],\"use_destination_for_fixed_price\":true},{\"applies_to\":null,\"applies_to_extras\":null,\"apply_surge\":false,\"customer_tip\":\"excluding_tax\",\"enabled\":false,\"markups\":null,\"name\":\"tips\",\"supplier_share\":100},{\"apply_surge\":false,\"correction\":0,\"markups\":null,\"name\":\"external_meter_surge\"},{\"applies_to\":null,\"apply_surge\":false,\"markups\":null,\"name\":\"surge\"}],\"name\":\"price_model\"}],\"service_class\":{\"id\":112,\"name\":\"yellow badge black taxi london\"},\"settings\":{\"distance_units\":\"kilometer\",\"granularity_precision\":1,\"unit_granularity\":\"no_rounding\"},\"taxes\":{\"conditional_tax\":null,\"managed_with_tax\":false,\"sales_tax\":{\"applies_to\":null,\"disabled\":false,\"rate\":20,\"state_of_origin\":null,\"tax_authority\":null},\"taxable_extras\":null}}},\"result\":{\"customer\":{\"amount\":6.4,\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"calculations\":[{\"price_model_component_result\":{\"amount\":0,\"explanation\":[{\"bindings\":{},\"key\":\"components.price_model.explanation.commitment_required_but_missing\"}],\"metadata\":{\"fallback_reason\":\"commitment_required_but_missing\"},\"name\":\"price_model\",\"status\":\"not_allowed\",\"sub_component_results\":null}},{\"price_model_component_result\":{\"amount\":6.4,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"taxes\":{\"conditional_tax_amount\":0,\"sales_tax_amount\":0}},\"name\":\"price_model\",\"status\":\"calculated\",\"sub_component_results\":[{\"amount\":6.4,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"taxes\":{\"amount_for_taxes\":6.4,\"includes_tax\":false}},\"name\":\"driving\",\"status\":\"calculated\",\"sub_component_results\":[{\"amount\":6.4,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"fallback_reason\":\"commitment_required_but_missing\",\"taxes\":{\"amount_for_taxes\":6.4,\"includes_tax\":false}},\"name\":\"external_meter\",\"status\":\"calculated\",\"sub_component_results\":null}]},{\"amount\":0,\"explanation\":[{\"bindings\":{\"tippable_amount\":\"6.40\",\"tips_percent\":\"0.0\"},\"key\":\"components.tips.explanation.basic\"}],\"metadata\":{\"amount_exc_tax\":0,\"amount_inc_tax\":0,\"applies_to\":[\"driving\"],\"cost_for_tips\":6.4,\"cost_for_tips_exc_tax\":6.4,\"cost_for_tips_inc_tax\":6.4,\"taxes\":{\"amount_for_taxes\":0,\"includes_tax\":false},\"tips_percent\":0},\"name\":\"tips\",\"status\":\"calculated\",\"sub_component_results\":null},{\"amount\":0,\"explanation\":[{\"bindings\":{\"amount\":0,\"correction\":0},\"key\":\"components.external_meter_surge.explanation.basic\"}],\"metadata\":{\"amount_exc_tax\":0,\"amount_inc_tax\":0,\"correction\":0,\"surge_amount\":0,\"taxes\":{\"amount_for_taxes\":0,\"includes_tax\":false}},\"name\":\"external_meter_surge\",\"status\":\"calculated\",\"sub_component_results\":null},{\"amount\":0,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":0,\"amount_inc_tax\":0,\"taxes\":{\"amount_for_taxes\":0,\"includes_tax\":false}},\"name\":\"surge\",\"status\":\"calculated\",\"sub_component_results\":null}]}}],\"concept_name\":\"Fixed Price, failing over to External Meter\",\"mode_name\":\"T1_offpeak_a\",\"mode_type\":\"none\",\"service_class\":{\"id\":112,\"name\":\"yellow badge black taxi london\"},\"status\":\"calculated\",\"taxes\":{\"conditional_tax\":{\"applies_to\":null,\"disabled\":false,\"disabled_reason\":null,\"full_rate\":0,\"rate\":0},\"managed_with_tax\":false,\"sales_tax\":{\"applies_to\":null,\"disabled\":false,\"disabled_reason\":null,\"full_rate\":0,\"rate\":0},\"taxable_extras\":null}},\"supplier\":{\"amount\":6.4,\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"calculations\":[{\"price_model_component_result\":{\"amount\":0,\"explanation\":[{\"bindings\":{},\"key\":\"components.price_model.explanation.commitment_required_but_missing\"}],\"metadata\":{\"fallback_reason\":\"commitment_required_but_missing\"},\"name\":\"price_model\",\"status\":\"not_allowed\",\"sub_component_results\":null}},{\"price_model_component_result\":{\"amount\":6.4,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"taxes\":{\"conditional_tax_amount\":0,\"sales_tax_amount\":0}},\"name\":\"price_model\",\"status\":\"calculated\",\"sub_component_results\":[{\"amount\":6.4,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"taxes\":{\"amount_for_taxes\":6.4,\"includes_tax\":false}},\"name\":\"driving\",\"status\":\"calculated\",\"sub_component_results\":[{\"amount\":6.4,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":6.4,\"amount_inc_tax\":6.4,\"fallback_reason\":\"commitment_required_but_missing\",\"taxes\":{\"amount_for_taxes\":6.4,\"includes_tax\":false}},\"name\":\"external_meter\",\"status\":\"calculated\",\"sub_component_results\":null}]},{\"amount\":0,\"explanation\":[{\"bindings\":{\"amount\":0,\"cost_change_value\":null,\"tolls_count\":0},\"key\":\"components.tolls.explanation.basic\"}],\"metadata\":{\"amount_exc_tax\":0,\"amount_inc_tax\":0,\"cost_change_value\":null,\"taxes\":{\"amount_for_taxes\":0,\"includes_tax\":false},\"tolls\":null},\"name\":\"tolls\",\"status\":\"calculated\",\"sub_component_results\":null},{\"amount\":0,\"explanation\":[{\"bindings\":{\"customer_tips_amount\":0,\"gett_tips_amount\":0,\"supplier_share\":100},\"key\":\"components.tips.explanation.supplier_share_from_tips_without_tax\"}],\"metadata\":{\"amount_exc_tax\":0,\"amount_inc_tax\":0,\"customer_tips_amount\":0,\"customer_tips_include_tax\":false,\"gett_tips_amount\":0,\"supplier_share_percent\":100,\"taxes\":{\"amount_for_taxes\":0,\"includes_tax\":true}},\"name\":\"tips\",\"status\":\"calculated\",\"sub_component_results\":null},{\"amount\":0,\"explanation\":[{\"bindings\":{\"amount\":0,\"correction\":0},\"key\":\"components.external_meter_surge.explanation.basic\"}],\"metadata\":{\"amount_exc_tax\":0,\"amount_inc_tax\":0,\"correction\":0,\"surge_amount\":0,\"taxes\":{\"amount_for_taxes\":0,\"includes_tax\":false}},\"name\":\"external_meter_surge\",\"status\":\"calculated\",\"sub_component_results\":null},{\"amount\":0,\"explanation\":null,\"metadata\":{\"amount_exc_tax\":0,\"amount_inc_tax\":0,\"taxes\":{\"amount_for_taxes\":0,\"includes_tax\":false}},\"name\":\"surge\",\"status\":\"calculated\",\"sub_component_results\":null}]}}],\"concept_name\":\"Fixed Price, failing over to External Meter\",\"mode_name\":\"T1_offpeak_a\",\"mode_type\":\"none\",\"service_class\":{\"id\":112,\"name\":\"yellow badge black taxi london\"},\"status\":\"calculated\",\"taxes\":{\"conditional_tax\":{\"applies_to\":null,\"disabled\":false,\"disabled_reason\":null,\"full_rate\":0,\"rate\":0},\"managed_with_tax\":false,\"sales_tax\":{\"applies_to\":null,\"disabled\":false,\"disabled_reason\":null,\"full_rate\":20,\"rate\":20},\"taxable_extras\":null}}}}";
        System.out.println(ExtJsonFunctions.getJsonKeys(str2,false));
        System.out.println(ExtJsonFunctions.getJsonValues(str2));

        System.out.println(ExtJsonFunctions.getJsonKeys("{\"a\": 4, \"e\": []}",false));

    }
}
